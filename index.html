<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feuille de R√©vision Math√©matiques</title>
    <!-- Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.2/firebase-database-compat.min.js"></script>
    
    <style>
        /* Styles g√©n√©raux */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 0;
            background-color: #f9f9f9;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        
        /* En-t√™te stylis√©e */
        .header {
            background-color: #4e5de3;
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        
        .character {
            font-size: 2.5em;
            margin-left: 15px;
        }
        
        /* Styles de section */
        section {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 5px solid #4e5de3;
        }
        
        /* Titres */
        h1 {
            margin: 0;
            font-size: 1.8em;
        }
        
        h2 {
            color: #4e5de3;
            border-bottom: 2px solid #7fc8f8;
            padding-bottom: 10px;
            margin-top: 0;
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        
        h3 {
            color: #333;
            margin-top: 20px;
        }
        
        .emoji {
            margin-right: 10px;
            font-size: 1.5em;
        }
        
        /* Exercices */
        .exercise {
            background-color: rgba(127, 200, 248, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #7fc8f8;
        }
        
        /* Zone de r√©ponse */
        .answer-input {
            width: 100%;
            padding: 8px;
            border: 1px solid #aaa;
            border-radius: 4px;
            margin: 10px 0 20px 0;
            font-size: 1rem;
        }
        
        .answer-input:focus {
            border-color: #4e5de3;
            outline: none;
            box-shadow: 0 0 3px rgba(78, 93, 227, 0.3);
        }
        
        /* Tableaux */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        
        th {
            background-color: #7fc8f8;
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: rgba(127, 200, 248, 0.1);
        }
        
        /* Grille pour mesurer l'aire */
        .grid-example {
            width: 300px;
            height: 300px;
            border: 1px solid #ccc;
            margin: 15px auto;
            display: grid;
            grid-template-columns: repeat(10, 1fr);
            grid-template-rows: repeat(10, 1fr);
        }
        
        .grid-cell {
            border: 1px solid #ddd;
            box-sizing: border-box;
        }
        
        .shape-cell {
            background-color: rgba(78, 93, 227, 0.3);
        }
        
        /* Formes g√©om√©triques */
        .shapes {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            margin: 20px 0;
        }
        
        .shape {
            text-align: center;
            margin: 10px;
        }
        
        .rectangle {
            width: 120px;
            height: 80px;
            background-color: rgba(78, 93, 227, 0.3);
            margin: 0 auto;
            border: 1px solid #4e5de3;
        }
        
        .square {
            width: 80px;
            height: 80px;
            background-color: rgba(78, 93, 227, 0.3);
            margin: 0 auto;
            border: 1px solid #4e5de3;
        }
        
        .triangle {
            width: 0;
            height: 0;
            border-left: 50px solid transparent;
            border-right: 50px solid transparent;
            border-bottom: 80px solid rgba(78, 93, 227, 0.3);
            margin: 0 auto;
        }
        
        .circle {
            width: 80px;
            height: 80px;
            background-color: rgba(78, 93, 227, 0.3);
            border-radius: 50%;
            margin: 0 auto;
            border: 1px solid #4e5de3;
        }
        
        /* Pied de page */
        footer {
            text-align: center;
            margin-top: 30px;
            color: #777;
            padding: 10px;
            font-size: 0.9em;
        }
        
        /* Status bar */
        .status-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: #4e5de3;
            color: white;
            padding: 10px 20px;
            text-align: center;
            box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .sheet-id {
            font-weight: bold;
            background-color: white;
            color: #4e5de3;
            padding: 5px 10px;
            border-radius: 4px;
            margin-left: 10px;
        }
        
        /* Share link box */
        .share-box {
            background-color: rgba(127, 200, 248, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #4e5de3;
            text-align: center;
        }
        
        .share-link {
            font-weight: bold;
            padding: 10px;
            border: 1px dashed #4e5de3;
            background-color: white;
            border-radius: 4px;
            margin: 10px 0;
            word-break: break-all;
        }
        
        .copy-btn {
            background-color: #4e5de3;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .copy-btn:hover {
            background-color: #3a49c9;
        }
        
        /* Last saved notification */
        .save-notification {
            font-size: 0.9em;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .save-notification.show {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Share box (appears only for new sheets) -->
        <div class="share-box" id="shareBox" style="display: none;">
            <h3>üì§ Partager cette feuille</h3>
            <p>Utilisez ce lien pour acc√©der √† cette feuille de travail depuis n'importe quel appareil :</p>
            <div class="share-link" id="shareLink"></div>
            <button class="copy-btn" id="copyBtn">Copier le lien</button>
        </div>
        
        <!-- En-t√™te principale -->
        <div class="header">
            <div>
                <h1>R√©vision Math√©matiques</h1>
                <p>Aire et Conversions</p>
            </div>
            <div class="character">üßô‚Äç‚ôÄÔ∏è</div>
        </div>
        
        <!-- Introduction -->
        <section id="intro">
            <h2><span class="emoji">üìù</span> Introduction</h2>
            <p>Bonjour! Cette feuille de r√©vision va t'aider √† ma√Ætriser:</p>
            <ul>
                <li>Les unit√©s de mesure d'aire</li>
                <li>Comment choisir l'unit√© appropri√©e</li>
                <li>Comment mesurer et calculer l'aire</li>
                <li>Comment convertir entre d√©cimales, fractions et pourcentages</li>
            </ul>
            <p>Compl√®te tous les exercices et ton progr√®s sera automatiquement sauvegard√©! ‚≠ê</p>
        </section>
        
        <!-- Les Unit√©s de Mesure -->
        <section id="unitesMesure">
            <h2><span class="emoji">üìè</span> Les Unit√©s de Mesure (Aire)</h2>
            <p>L'aire est la mesure de la surface occup√©e par une figure plane. On l'exprime g√©n√©ralement en unit√©s carr√©es.</p>
            
            <div class="exercise">
                <h3>Les unit√©s d'aire principales:</h3>
                <table>
                    <tr>
                        <th>Unit√©</th>
                        <th>Symbole</th>
                        <th>√âquivalence</th>
                        <th>Exemple d'utilisation</th>
                    </tr>
                    <tr>
                        <td>Kilom√®tre carr√©</td>
                        <td>km¬≤</td>
                        <td>1 000 000 m¬≤</td>
                        <td>Surface d'une ville</td>
                    </tr>
                    <tr>
                        <td>Hectare</td>
                        <td>ha</td>
                        <td>10 000 m¬≤</td>
                        <td>Surface d'un terrain agricole</td>
                    </tr>
                    <tr>
                        <td>Are</td>
                        <td>a</td>
                        <td>100 m¬≤</td>
                        <td>Petite parcelle de terrain</td>
                    </tr>
                    <tr>
                        <td>M√®tre carr√©</td>
                        <td>m¬≤</td>
                        <td>Unit√© de base</td>
                        <td>Surface d'une chambre</td>
                    </tr>
                    <tr>
                        <td>D√©cim√®tre carr√©</td>
                        <td>dm¬≤</td>
                        <td>0,01 m¬≤</td>
                        <td>Surface d'un livre</td>
                    </tr>
                    <tr>
                        <td>Centim√®tre carr√©</td>
                        <td>cm¬≤</td>
                        <td>0,0001 m¬≤</td>
                        <td>Surface d'un timbre</td>
                    </tr>
                    <tr>
                        <td>Millim√®tre carr√©</td>
                        <td>mm¬≤</td>
                        <td>0,000001 m¬≤</td>
                        <td>Section d'un fil √©lectrique</td>
                    </tr>
                </table>
            </div>
            
            <div class="exercise">
                <h3>Exercice 1: Classer les unit√©s d'aire</h3>
                <p>Classe les unit√©s suivantes dans les bonnes cat√©gories:</p>
                <p><strong>Unit√©s disponibles:</strong> km¬≤, ha, m¬≤, a, cm¬≤, mm¬≤, dm¬≤</p>
                
                <p>a) Grandes surfaces:</p>
                <input type="text" class="answer-input" id="answer1a" placeholder="Ta r√©ponse ici...">
                
                <p>b) Surfaces moyennes:</p>
                <input type="text" class="answer-input" id="answer1b" placeholder="Ta r√©ponse ici...">
                
                <p>c) Petites surfaces:</p>
                <input type="text" class="answer-input" id="answer1c" placeholder="Ta r√©ponse ici...">
            </div>
        </section>
        
        <!-- Trouver l'Unit√© de Mesure la Plus Appropri√©e -->
        <section id="uniteAppropriee">
            <h2><span class="emoji">üîç</span> Trouver l'Unit√© de Mesure la Plus Appropri√©e</h2>
            <p>Il est important de choisir l'unit√© d'aire qui convient le mieux √† ce que l'on mesure.</p>
            
            <div class="exercise">
                <h3>Comment choisir?</h3>
                <p>Pour choisir l'unit√© appropri√©e, pose-toi les questions suivantes:</p>
                <ul>
                    <li>Quelle est la taille approximative de la surface que je mesure?</li>
                    <li>Quelle pr√©cision est n√©cessaire pour ma mesure?</li>
                    <li>Quelle unit√© est habituellement utilis√©e dans ce contexte?</li>
                </ul>
            </div>
            
            <div class="exercise">
                <h3>Exercice 2: Choisis l'unit√© la plus appropri√©e</h3>
                
                <p>1. Quelle unit√© utiliserais-tu pour mesurer la surface d'un terrain de football?</p>
                <input type="text" class="answer-input" id="answer2a" placeholder="Ta r√©ponse ici...">
                
                <p>2. Quelle unit√© utiliserais-tu pour mesurer la surface d'un pays?</p>
                <input type="text" class="answer-input" id="answer2b" placeholder="Ta r√©ponse ici...">
                
                <p>3. Quelle unit√© utiliserais-tu pour mesurer la surface d'une carte postale?</p>
                <input type="text" class="answer-input" id="answer2c" placeholder="Ta r√©ponse ici...">
                
                <p>4. Quelle unit√© utiliserais-tu pour mesurer la surface d'une chambre?</p>
                <input type="text" class="answer-input" id="answer2d" placeholder="Ta r√©ponse ici...">
            </div>
        </section>
        
        <!-- Mesurer l'Aire -->
        <section id="mesurerAire">
            <h2><span class="emoji">üìä</span> Mesurer l'Aire</h2>
            <p>Pour mesurer l'aire d'une figure, on peut:</p>
            <ul>
                <li>Compter les carr√©s unitaires dans une grille</li>
                <li>Utiliser des formules pour les figures r√©guli√®res</li>
                <li>D√©composer des figures complexes en figures simples</li>
            </ul>
            
            <div class="exercise">
                <h3>Exemple: Mesurer sur une grille</h3>
                <p>Voici une forme irr√©guli√®re plac√©e sur une grille de carr√©s unitaires:</p>
                
                <div class="grid-example">
                    <!-- Cr√©ation d'une forme irr√©guli√®re sur la grille -->
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell shape-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                    <div class="grid-cell"></div>
                </div>
                
                <p>Pour mesurer cette forme:</p>
                <ol>
                    <li>Compte les carr√©s complets (qui sont enti√®rement dans la figure)</li>
                    <li>Estime les carr√©s partiels (qui sont partiellement dans la figure)</li>
                    <li>Additionne pour trouver l'aire totale</li>
                </ol>
            </div>
            
            <div class="exercise">
                <h3>Exercice 3: Estimation d'aires</h3>
                <p>Estime l'aire de la forme sur la grille pr√©sent√©e ci-dessus.</p>
                <p>Rappel: Chaque carr√© complet = 1 unit√© carr√©e, chaque carr√© √† moiti√© rempli = 0,5 unit√© carr√©e.</p>
                
                <input type="text" class="answer-input" id="answer3" placeholder="Ta r√©ponse ici...">
            </div>
        </section>
        
        <!-- Le Calcul de l'Aire -->
        <section id="calculAire">
            <h2><span class="emoji">üßÆ</span> Le Calcul de l'Aire</h2>
            <p>Pour calculer l'aire des figures g√©om√©triques r√©guli√®res, on utilise des formules sp√©cifiques.</p>
            
            <div class="exercise">
                <h3>Formules principales:</h3>
                <ul>
                    <li><strong>Rectangle:</strong> Aire = longueur √ó largeur</li>
                    <li><strong>Carr√©:</strong> Aire = c√¥t√© √ó c√¥t√© = c√¥t√©¬≤</li>
                    <li><strong>Triangle:</strong> Aire = (base √ó hauteur) √∑ 2</li>
                    <li><strong>Cercle:</strong> Aire = œÄ √ó rayon¬≤</li>
                    <li><strong>Parall√©logramme:</strong> Aire = base √ó hauteur</li>
                    <li><strong>Trap√®ze:</strong> Aire = ((base 1 + base 2) √ó hauteur) √∑ 2</li>
                </ul>
            </div>
            
            <div class="shapes">
                <div class="shape">
                    <div class="rectangle"></div>
                    <p>Rectangle</p>
                </div>
                <div class="shape">
                    <div class="square"></div>
                    <p>Carr√©</p>
                </div>
                <div class="shape">
                    <div class="triangle"></div>
                    <p>Triangle</p>
                </div>
                <div class="shape">
                    <div class="circle"></div>
                    <p>Cercle</p>
                </div>
            </div>
            
            <div class="exercise">
                <h3>Exercice 4: Calcule l'aire des figures suivantes</h3>
                
                <p>1. Un rectangle de longueur 8 cm et de largeur 5 cm.</p>
                <input type="text" class="answer-input" id="answer4a" placeholder="Ta r√©ponse ici...">
                
                <p>2. Un carr√© de c√¥t√© 6 m.</p>
                <input type="text" class="answer-input" id="answer4b" placeholder="Ta r√©ponse ici...">
                
                <p>3. Un triangle de base 12 cm et de hauteur 7 cm.</p>
                <input type="text" class="answer-input" id="answer4c" placeholder="Ta r√©ponse ici...">
                
                <p>4. Un cercle de rayon 4 cm. (Utilise œÄ = 3,14)</p>
                <input type="text" class="answer-input" id="answer4d" placeholder="Ta r√©ponse ici...">
            </div>
        </section>
        
        <!-- Transformer un Nombre D√©cimal en Fraction et Pourcentage -->
        <section id="conversions">
            <h2><span class="emoji">üîÑ</span> Transformer un Nombre D√©cimal en Fraction et Pourcentage</h2>
            <p>La conversion entre d√©cimales, fractions et pourcentages est une comp√©tence importante en math√©matiques.</p>
            
            <div class="exercise">
                <h3>M√©thodes de conversion:</h3>
                <table>
                    <tr>
                        <th>Conversion</th>
                        <th>M√©thode</th>
                        <th>Exemple</th>
                    </tr>
                    <tr>
                        <td>D√©cimal ‚Üí Fraction</td>
                        <td>Placer le nombre sur un d√©nominateur de puissance de 10 appropri√©e, puis simplifier</td>
                        <td>0,75 = 75/100 = 3/4</td>
                    </tr>
                    <tr>
                        <td>D√©cimal ‚Üí Pourcentage</td>
                        <td>Multiplier par 100 et ajouter le symbole %</td>
                        <td>0,75 = 0,75 √ó 100 = 75%</td>
                    </tr>
                    <tr>
                        <td>Fraction ‚Üí D√©cimal</td>
                        <td>Diviser le num√©rateur par le d√©nominateur</td>
                        <td>3/4 = 3 √∑ 4 = 0,75</td>
                    </tr>
                    <tr>
                        <td>Fraction ‚Üí Pourcentage</td>
                        <td>Convertir en d√©cimal puis multiplier par 100</td>
                        <td>3/4 = 0,75 = 75%</td>
                    </tr>
                    <tr>
                        <td>Pourcentage ‚Üí D√©cimal</td>
                        <td>Diviser par 100 (enlever le symbole % et d√©placer la virgule de 2 rangs vers la gauche)</td>
                        <td>75% = 75 √∑ 100 = 0,75</td>
                    </tr>
                    <tr>
                        <td>Pourcentage ‚Üí Fraction</td>
                        <td>√âcrire comme une fraction avec 100 comme d√©nominateur, puis simplifier</td>
                        <td>75% = 75/100 = 3/4</td>
                    </tr>
                </table>
            </div>
            
            <div class="exercise">
                <h3>Exercice 5: Conversions d√©cimale-fraction-pourcentage</h3>
                
                <p>1. Convertis 0,25 en pourcentage:</p>
                <input type="text" class="answer-input" id="answer5a" placeholder="Ta r√©ponse ici...">
                
                <p>2. Convertis 0,8 en fraction simplifi√©e:</p>
                <input type="text" class="answer-input" id="answer5b" placeholder="Ta r√©ponse ici...">
                
                <p>3. Convertis 40% en d√©cimal:</p>
                <input type="text" class="answer-input" id="answer5c" placeholder="Ta r√©ponse ici...">
                
                <p>4. Convertis 3/5 en pourcentage:</p>
                <input type="text" class="answer-input" id="answer5d" placeholder="Ta r√©ponse ici...">
            </div>
        </section>
        
        <!-- Probl√®mes Pratiques -->
        <section id="problemes">
            <h2><span class="emoji">üß©</span> Probl√®mes Pratiques</h2>
            <p>Appliquons ces concepts √† des situations r√©elles!</p>
            
            <div class="exercise">
                <h3>Exercice 6: R√©solution de probl√®mes</h3>
                
                <p>1. La chambre de Julie mesure 4 m de longueur et 3,5 m de largeur. Quelle est l'aire de sa chambre?</p>
                <input type="text" class="answer-input" id="answer6a" placeholder="Ta r√©ponse ici...">
                
                <p>2. Un jardin a la forme d'un carr√© de 8 m de c√¥t√©. Le jardinier veut planter des fleurs sur 25% de la surface. Quelle aire sera occup√©e par les fleurs?</p>
                <input type="text" class="answer-input" id="answer6b" placeholder="Ta r√©ponse ici...">
                
                <p>3. Une pizza a un diam√®tre de 30 cm. Quelle est l'aire de cette pizza? Si tu en manges 2/5, quelle surface as-tu mang√©e?</p>
                <input type="text" class="answer-input" id="answer6c" placeholder="Ta r√©ponse ici...">
            </div>
        </section>
        
        <footer>
            <p>Feuille de r√©vision cr√©√©e sp√©cialement pour toi! üåü</p>
        </footer>
    </div>
    
    <!-- Status bar -->
    <div class="status-bar">
        <div class="save-notification" id="saveNotification">Sauvegarde automatique effectu√©e</div>
        <div>ID de la feuille: <span class="sheet-id" id="sheetId">Chargement...</span></div>
    </div>
    
    <script>
        // Configuration Firebase - REMPLACER AVEC VOS INFORMATIONS
        const firebaseConfig = {
  		apiKey: "AIzaSyBnFB7ZoqliCOF1a57G0cbLOEoyMGzf9QI",
  		authDomain: "sham-s-worksheets.firebaseapp.com",
  		databaseURL: "https://sham-s-worksheets-default-rtdb.firebaseio.com",
  		projectId: "sham-s-worksheets",
  		storageBucket: "sham-s-worksheets.firebasestorage.app",
  		messagingSenderId: "408757720197",
  		appId: "1:408757720197:web:fd63c16cfc0fb3afc185ec",
  		measurementId: "G-CZ7BSB67LV"
	};
        
        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        
        // G√©n√©ration d'un ID unique pour la feuille
        function generateSheetId() {
            const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
            let result = '';
            for (let i = 0; i < 6; i++) {
                result += chars.charAt(Math.floor(Math.random() * chars.length));
            }
            return result;
        }
        
        // R√©cup√©rer l'ID de la feuille depuis l'URL ou en g√©n√©rer un nouveau
        function getSheetId() {
            const urlParams = new URLSearchParams(window.location.search);
            const sheetId = urlParams.get('id');
            
            if (sheetId) {
                return sheetId;
            } else {
                const newSheetId = generateSheetId();
                // Mettre √† jour l'URL avec le nouvel ID
                const newUrl = window.location.origin + window.location.pathname + '?id=' + newSheetId;
                window.history.replaceState({}, document.title, newUrl);
                
                // Afficher la bo√Æte de partage
                document.getElementById('shareBox').style.display = 'block';
                document.getElementById('shareLink').textContent = newUrl;
                
                return newSheetId;
            }
        }
        
        // ID de la feuille actuelle
        const sheetId = getSheetId();
        document.getElementById('sheetId').textContent = sheetId;
        
        // R√©f√©rence √† la feuille dans la base de donn√©es
        const sheetRef = database.ref('sheets/' + sheetId);
        
        // R√©cup√©rer tous les champs de r√©ponse
        const answerInputs = document.querySelectorAll('.answer-input');
        
        // Charger les r√©ponses depuis Firebase
        sheetRef.once('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                // Remplir les champs avec les donn√©es sauvegard√©es
                answerInputs.forEach(input => {
                    if (data[input.id]) {
                        input.value = data[input.id];
                    }
                });
            }
        });
        
        // Sauvegarder automatiquement apr√®s modification
        let saveTimeout;
        answerInputs.forEach(input => {
            input.addEventListener('input', () => {
                clearTimeout(saveTimeout);
                saveTimeout = setTimeout(() => {
                    saveProgress();
                }, 1000); // Sauvegarder 1 seconde apr√®s la derni√®re frappe
            });
        });
        
        // Fonction pour sauvegarder les progr√®s
        function saveProgress() {
            const data = {};
            
            // Collecter toutes les r√©ponses
            answerInputs.forEach(input => {
                data[input.id] = input.value;
            });
            
            // Sauvegarder dans Firebase
            sheetRef.update(data)
                .then(() => {
                    // Afficher notification de sauvegarde
                    const notification = document.getElementById('saveNotification');
                    notification.textContent = 'Sauvegarde automatique effectu√©e ‚úì';
                    notification.classList.add('show');
                    
                    setTimeout(() => {
                        notification.classList.remove('show');
                    }, 2000);
                })
                .catch((error) => {
                    console.error("Erreur de sauvegarde:", error);
                    const notification = document.getElementById('saveNotification');
                    notification.textContent = 'Erreur de sauvegarde ‚úó';
                    notification.classList.add('show');
                    
                    setTimeout(() => {
                        notification.classList.remove('show');
                    }, 2000);
                });
        }
        
        // Copier le lien de partage
        document.getElementById('copyBtn').addEventListener('click', () => {
            const shareLink = document.getElementById('shareLink').textContent;
            navigator.clipboard.writeText(shareLink)
                .then(() => {
                    alert('Lien copi√© dans le presse-papiers!');
                })
                .catch(err => {
                    console.error('Erreur lors de la copie: ', err);
                });
        });
    </script>
</body>
</html>
